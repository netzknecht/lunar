version: '3.8'
name: lunar
services:
  test-php8.1-laravel9: &test-php8-1
    image: lunar:php8.1
    environment:
      - LARAVEL_VERSION=^9
      - COMPOSER_HOME=/composer
      - PHP_UNIT_ARGS=${PHP_UNIT_ARGS:-}
    command: test
    user: lunar
    volumes:
      - ../.:/home/lunar/src
      - composer:/composer
  test-php8.1-laravel10:
    <<: *test-php8-1
    environment:
      - LARAVEL_VERSION=^10
      - COMPOSER_HOME=/composer
      - PHP_UNIT_ARGS=${PHP_UNIT_ARGS:-}
  test-php8.2-laravel9: &test-php8-2
    <<: *test-php8-1
    image: lunar:php8.2
    environment:
      - LARAVEL_VERSION=^9
      - COMPOSER_HOME=/composer
      - PHP_UNIT_ARGS=${PHP_UNIT_ARGS:-}
  test-php8.2-laravel10:
    <<: *test-php8-2
    environment:
      - LARAVEL_VERSION=^10
      - COMPOSER_HOME=/composer
      - PHP_UNIT_ARGS=${PHP_UNIT_ARGS:-}
volumes:
  composer: